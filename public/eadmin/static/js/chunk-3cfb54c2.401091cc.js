(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cfb54c2"],{"47d7":function(e,t,c){},ba26:function(e,t,c){"use strict";c.r(t);var n=c("f2bf"),a=Object(n["withScopeId"])("data-v-5e303452");Object(n["pushScopeId"])("data-v-5e303452");var o={key:0,class:"el-notification right",role:"alert",style:{bottom:"20px"}},i={class:"el-notification__group",style:{width:"100%"}},r={style:{display:"flex","align-items":"center"}},s={key:0,class:"time-text"},l=Object(n["createTextVNode"])("剩余"),u={class:"time"},d={key:1,class:"time-text"},b={class:"el-notification__content"};Object(n["popScopeId"])();var p=a((function(e,t,c,a,p,f){var j=Object(n["resolveComponent"])("el-progress");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("span",{onClick:t[1]||(t[1]=function(){return e.clickHandel&&e.clickHandel.apply(e,arguments)})},[Object(n["renderSlot"])(e.$slots,"default",{},void 0,!0)]),(Object(n["openBlock"])(),Object(n["createBlock"])(n["Teleport"],{to:"body"},[e.visible?(Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",r,[Object(n["createVNode"])("h2",{class:"el-notification__title",innerHTML:e.title},null,8,["innerHTML"]),"success"!=e.status?(Object(n["openBlock"])(),Object(n["createBlock"])("span",s,[l,Object(n["createVNode"])("span",u,Object(n["toDisplayString"])(e.remain_time),1)])):Object(n["createCommentVNode"])("",!0),e.file?(Object(n["openBlock"])(),Object(n["createBlock"])("span",d,[Object(n["createVNode"])("a",{target:"_blank",href:e.file},"下载文件",8,["href"])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])(j,{percentage:e.progress,status:e.status},null,8,["percentage","status"])]),Object(n["createVNode"])("div",{class:"el-notification__closeBtn el-icon-close",onClick:t[2]||(t[2]=function(){return e.close&&e.close.apply(e,arguments)})})])])):Object(n["createCommentVNode"])("",!0)]))],64)})),f=c("5530"),j=(c("fb6a"),c("3fd4")),O=c("78b1"),m=c("d257"),v=Object(n["defineComponent"])({name:"EadminQueue",props:{title:String,url:String,confirm:String,params:{type:Object,default:{}}},setup:function(e){var t=Object(n["reactive"])({progress:0,status:"",file:"",remain_time:"",visible:!1}),c=null,a=0;function o(){e.confirm?j["c"].confirm(e.confirm,"提示",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){i()})):i()}function i(){a=0,Object(O["a"])({url:e.url,method:"post",data:e.params}).then((function(e){c&&(t.progress=0,t.status="",t.file="",t.remain_time="",clearInterval(c)),t.visible=!0,c=setInterval((function(){s(e.data)}),500)}))}function r(){t.visible=!1,clearInterval(c)}function s(e){Object(O["a"])({url:"queue/progress",params:{id:e}}).then((function(e){0===e.data.status&&0===a&&(a=1,j["b"].warning(Object(m["u"])("queue_message"))),t.progress=e.data.progress,t.remain_time=e.data.remain_time,4==e.data.status&&(t.status="exception",clearInterval(c)),3==e.data.status&&(clearInterval(c),t.file=e.data.history.slice(-2)[0].message,t.status="success")}))}return Object(n["onBeforeUnmount"])((function(){r()})),Object(n["onDeactivated"])((function(){r()})),Object(f["a"])({clickHandel:o,close:r},Object(n["toRefs"])(t))}});c("ca73");v.render=p,v.__scopeId="data-v-5e303452";t["default"]=v},ca73:function(e,t,c){"use strict";c("47d7")}}]);